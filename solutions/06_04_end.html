<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>06_04 - D3.js Essential Training</title>
    <style>
        html, body {
            height: 100%;
            margin: 0;
        }
        circle {
            fill: pink;
            stroke: black;
            stroke-width: 2px;
        }

        text {
            fill:red;
            font-size:24px;
            font-family: Arial, Helvetica, sans-serif;
            /* stroke: black;
            stroke-width: 1px; */
            
        }
    </style>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/d3/7.9.0/d3.min.js"></script>
</head>
<body>
    <script>
        let width = document.documentElement.clientWidth;
        let height = document.documentElement.clientHeight;
        const svg = d3.select("body").append("svg")
        .attr("height", "100%")
        .attr("width", "100%");
        // .attr("viewBox", "0 0 " + width + " " + height)
        // .attr("preserveAspectRatio", "xMidYMid meet");
        
        const margin = {'left': 50, 'right':50, 'top':50, 'bottom':50};
        width -=margin.left + margin.right;
        height -=margin.top + margin.bottom;

        const chartGroup = svg.append('g').attr('class','chartGroup')
            .attr('transform',`translate(${margin.left},${margin.top})`);


        fetch("https://raw.githubusercontent.com/LinkedInLearning-VizData/d3/refs/heads/main/data.xml")
        .then(response => response.text())
        .then(str=> new window.DOMParser().parseFromString(str, "application/xml"))
        .then(function(xml){
            const people = xml.querySelectorAll("person");
            const data = Array.from(people).map(person => ({
                name: person.getAttribute("name"),
                age: person.getAttribute("age"),
                score: person.getAttribute("score")
            }))
            console.log(data);

        })
        .catch(error => console.error("Error fetching xml: ", error));
        // d3.json("https://raw.githubusercontent.com/LinkedInLearning-VizData/d3/refs/heads/main/barData.json")
        //     .then(function(data){

        //         const xScale = d3.scaleBand()
        //             .domain(data.map(d =>d.category))//input
        //             .range([0, width])//output
        //             .padding(0.5);
                
        //         const yMax = d3.max(data, d=>d3.max(d.subcategories, s=>s.value));
                
        //         const yScale = d3.scaleLinear()
        //         .domain([0, yMax])//input
        //         .range([height, 0])//output
        //         .nice();
        
        //         const axisXGroup = chartGroup.append('g').attr('class','x axis')
        //             .attr('transform',`translate(0,${height})`)
        //             .call(d3.axisBottom(xScale));

        //         const axisYGroup = chartGroup.append('g').attr('class','y axis')
        //             .attr('transform',`translate(0,0)`)
        //             .call(d3.axisLeft(yScale));
                
        //         chartGroup.selectAll('g.category').data(data).enter().append('g')
        //             .attr('class','category')
        //             .attr('transform',d=> `translate(${xScale(d.category)},0)`);
                
        //         chartGroup.selectAll('g.category').selectAll('rect').data(d=>d.subcategories).enter().append('rect')
        //             .attr("height",d=>{
        //                 return height - yScale(d.value);
        //             })
        //             .attr("width", xScale.bandwidth()/3)
        //             .attr("x", (d,i)=> (i-1)*xScale.bandwidth()/3)
        //             .attr("y", d=>yScale(d.value))
        //             .attr('fill','steelblue');
                



        //     });

    </script>

</body>
</html>